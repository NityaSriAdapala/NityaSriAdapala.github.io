
<!DOCTYPE html>
<html>
<head>
    <title>Project 4</title>
    <style>
        h1 {
            font-family: Georgia, sans-serif;
            margin: 20px;
            text-align: center;
        }
        h2 {
            font-family: Georgia, sans-serif;
            margin: 20px;
            text-align: center;
        }
        h3 {
            font-family: Georgia, sans-serif;
            margin: 20px;
            text-align: center;
        }
        p {
            font-family: Georgia, sans-serif;
            margin: 20px;
            padding: 10px;
        }
        ul {
            font-family: Georgia, sans-serif;
            margin: 20px;
            padding: 10px;
        }
        .image-container {
            display: flex;
            justify-content: center;
            margin: 10px;
            align-items: center;
        }
        .image-container img {
            margin: 20 auto;
            box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1);
            height: 300px;
            width: auto;
            max-width: 100%;
            align-items: center;
            display: block;
            margin: 30px;
        }
        .image-caption {
            margin: 5px 0;
            text-align: center;
        }
        .scaled-image {
            width: 80%; 
            height: auto;  
        }
        hr.rounded {
          border-top: 2px solid #000;
          border-radius: 5px;
        }
        
    </style>
</head>
<body>
    <h1> Project 4: Image Warping and Mosaicing </h1>

    <h2> NITYA SRI ADAPALA </h2>
    
    <h2> Introduction </h2>

    <p> In this project, I take two or three photographs and create an image mosaic by registering, projective warping, resampling, and compositing them. 
        Throughout this project, I learned how to compute homographies, and use them to warp images.</p>

    <hr class="rounded">
    <h2> Part A </h2>
    <hr class="rounded">

    <hr class="rounded">
    <h3> Taking Images </h3>
    <hr class="rounded">

    <p> Below are some images I used in this project: </p>

    <div class="image-container">
        <div>
            <img src="media/01.png" alt="Hildebrand Left">
            <div class="image-caption">Hildebrand Left</div>
        </div>
        <div>
            <img src="media/02.png" alt="Hildebrand Center">
            <div class="image-caption">Hildebrand Center</div>
        </div>
        <div>
            <img src="media/03.png" alt="Hildebrand Right">
            <div class="image-caption">Hildebrand Right</div>
        </div>
    </div>

    <div class="image-container">
        <div>
            <img src="media/04.png" alt="Memorial Stadium Left">
            <div class="image-caption">Memorial Stadium Left</div>
        </div>
        <div>
            <img src="media/05.png" alt="Memorial Stadium Center">
            <div class="image-caption">Memorial Stadium Center</div>
        </div>
        <div>
            <img src="media/06.png" alt="Memorial Stadium Right">
            <div class="image-caption">Memorial Stadium Right</div>
        </div>
    </div>

    <div class="image-container">
        <div>
            <img src="media/07.png" alt="Chou Hall Left">
            <div class="image-caption">Chou Hall Left</div>
        </div>
        <div>
            <img src="media/08.png" alt="Chou Hall Center">
            <div class="image-caption">Chou Hall Center</div>
        </div>
        <div>
            <img src="media/09.png" alt="Chou Hall Right">
            <div class="image-caption">Chou Hall Right</div>
        </div>
    </div>
  
    <hr class="rounded">
    <h3> Recover Homographies </h3>
    <hr class="rounded">

    <p> First, using the online tool provided by the course, I identified correspondence points in each pair of images, where one image is 
        the image that will be warped onto the reference image and the second image is the reference image. After setting up the overdetermined 
        linear system of equations, we solve it using least squares. After performing SVD, we get the matrices U, S and V transpose. In order 
        to minimize the loss function we want the vector that corresponds to the smallest eigenvalue in V transpose, which is the last vector.
        We then reshape the vector into a 3x3 matrix. This becomes our H matrix.</p>

    <hr class="rounded">
    <h3> Warp the Images </h3>
    <hr class="rounded">

    <p> Now that we have calculated the homography matrix, we can use this homography to warp each image towards the reference image. 
        First, I find the corners of the image to identify the boundaries of the bounding box before warping. Then, I do a forward warp 
        of the bounding box and normalize it so that I know the space in which pixels need to be filled. I then find the bounding box of 
        the final image, which is an empty canvas. I copy over image 2 into the final image. Once I've found the polygon in which the final
        image will be placed, I applied inverse homography to perform a backward warp to produce the final output coordinates. Finally, 
        I interpolated the pixels in image 1 that will be mapped to each pixel in the output. Below are the resulting images: </p>

    <div class="image-container">
        <div>
            <img src="media/10.png" alt="Canvas for Final Image with Hildebrand Center">
            <div class="image-caption">Canvas for Final Image with Hildebrand Center</div>
        </div>
        <div>
            <img src="media/11.png" alt="Warped Bounding Box of Hildebrand Left">
            <div class="image-caption">Warped Bounding Box of Hildebrand Left</div>
        </div>
        <div>
            <img src="media/12.png" alt="Hildebrand Left Warped onto Hildebrand Center">
            <div class="image-caption">Hildebrand Left Warped onto Hildebrand Center</div>
        </div>
    </div>

    <div class="image-container">
        <div>
            <img src="media/13.png" alt="Canvas for Final Image with Hildebrand Center">
            <div class="image-caption">Canvas for Final Image with Hildebrand Center</div>
        </div>
        <div>
            <img src="media/14.png" alt="Warped Bounding Box of Hildebrand Right">
            <div class="image-caption">Warped Bounding Box of Hildebrand Right</div>
        </div>
        <div>
            <img src="media/15.png" alt="Hildebrand Right Warped onto Hildebrand Center">
            <div class="image-caption">Hildebrand Right Warped onto Hildebrand Center</div>
        </div>
    </div>

    <div class="image-container">
        <div>
            <img src="media/16.png" alt="Canvas for Final Image with Memorial Stadium Center">
            <div class="image-caption">Canvas for Final Image with Memorial Stadium Center</div>
        </div>
        <div>
            <img src="media/17.png" alt="Warped Bounding Box of Memorial Stadium Left">
            <div class="image-caption">Warped Bounding Box of Memorial Stadium Left</div>
        </div>
        <div>
            <img src="media/18.png" alt="Memorial Stadium Left Warped onto Memorial Stadium Center">
            <div class="image-caption">Memorial Stadium Left Warped onto Memorial Stadium Center</div>
        </div>
    </div>

    <div class="image-container">
        <div>
            <img src="media/19.png" alt="Canvas for Final Image with Memorial Stadium Center">
            <div class="image-caption">Canvas for Final Image with Memorial Stadium Center</div>
        </div>
        <div>
            <img src="media/20.png" alt="Warped Bounding Box of Memorial Stadium Right">
            <div class="image-caption">Warped Bounding Box of Memorial Stadium Right</div>
        </div>
        <div>
            <img src="media/21.png" alt="Memorial Stadium Right Warped onto Memorial Stadium Center">
            <div class="image-caption">Memorial Stadium Right Warped onto Memorial Stadium Center</div>
        </div>
    </div>

    <div class="image-container">
        <div>
            <img src="media/22.png" alt="Canvas for Final Image with Chou Hall Center">
            <div class="image-caption">Canvas for Final Image with Chou Hall Center</div>
        </div>
        <div>
            <img src="media/23.png" alt="Warped Bounding Box of Chou Hall Left">
            <div class="image-caption">Warped Bounding Box of Chou Hall Left</div>
        </div>
        <div>
            <img src="media/24.png" alt="Chou Hall Left Warped onto Chou Hall Center">
            <div class="image-caption">Chou Hall Left Warped onto Chou Hall Center</div>
        </div>
    </div>

    <div class="image-container">
        <div>
            <img src="media/25.png" alt="Canvas for Final Image with Chou Hall Center">
            <div class="image-caption">Canvas for Final Image with Chou Hall Center</div>
        </div>
        <div>
            <img src="media/26.png" alt="Warped Bounding Box of Chou Hall Right">
            <div class="image-caption">Warped Bounding Box of Chou Hall Right</div>
        </div>
        <div>
            <img src="media/27.png" alt="Chou Hall Right Warped onto Chou Hall Center">
            <div class="image-caption">Chou Hall Right Warped onto Chou Hall Center</div>
        </div>
    </div>

    <hr class="rounded">
    <h3> Image Rectification </h3>
    <hr class="rounded">

    <p> To ensure that my homography and warping is working correctly, I performed image rectification. I took pictures of things that 
        I knew were square at an angle so that they weren't square in the image. I then rectified the images by warping the images so
        that the features become square. First, I selected four points in the original image that would map to a square, which I defined manually,
        and then I compute the H matrix using these correspondence points. Using this H matrix, we warp the image so that the features become square.
        The black areas of the image are caused due to the distortion of perspective. Here are the images before and after rectification: </p>

    <div class="image-container">
        <div>
            <img src="media/28.png" alt="Image of Moffitt Library Ceiling">
            <div class="image-caption">Image of Moffitt Library Ceiling</div>
        </div>
        <div>
            <img src="media/29.png" alt="Rectified Image of Moffitt Library Ceiling">
            <div class="image-caption">Rectified Image of Moffitt Library Ceiling</div>
        </div>
        <div>
            <img src="media/30.png" alt="Image of Campanile">
            <div class="image-caption">Image of Campanile</div>
        </div>
        <div>
            <img src="media/31.png" alt="Chou Hall Right Warped onto Chou Hall Center">
            <div class="image-caption">Rectified Image of Campanile</div>
        </div>
    </div>
    
    <hr class="rounded">
    <h3> Blend the images into a mosaic </h3>
    <hr class="rounded">

    <p> </p>

    <hr class="rounded">
    <div class="image-container">
        <div>
            <img src="media/32.png" alt="Distance Transform for Hildebrand Left">
            <div class="image-caption">Distance Transform for Hildebrand Left</div>
        </div>
        <div>
            <img src="media/33.png" alt="Distance Transform for Hildebrand Center">
            <div class="image-caption">Distance Transform for Hildebrand Center</div>
        </div>
        <div>
            <img src="media/34.png" alt="Blending Mask">
            <div class="image-caption">Blending Mask</div>
        </div>
        <div>
            <img src="media/35.png" alt="Final Blended Output of Hildebrand Left and Center">
            <div class="image-caption">Final Blended Output of Hildebrand Left and Center</div>
        </div>
    </div>

    <hr class="rounded">
    <div class="image-container">
        <div>
            <img src="media/36.png" alt="Distance Transform for Hildebrand Right">
            <div class="image-caption">Distance Transform for Hildebrand Left</div>
        </div>
        <div>
            <img src="media/37.png" alt="Distance Transform for Hildebrand Center">
            <div class="image-caption">Distance Transform for Hildebrand Center</div>
        </div>
        <div>
            <img src="media/38.png" alt="Blending Mask">
            <div class="image-caption">Blending Mask</div>
        </div>
        <div>
            <img src="media/39.png" alt="Final Blended Output of Hildebrand Right and Center">
            <div class="image-caption">Final Blended Output of Hildebrand Right and Center</div>
        </div>
    </div>
    
    <hr class="rounded">
    <div class="image-container">
        <div>
            <img src="media/40.png" alt="Distance Transform for Memorial Stadium Left">
            <div class="image-caption">Distance Transform for Memorial Stadium Left</div>
        </div>
        <div>
            <img src="media/41.png" alt="Distance Transform for Memorial Stadium Center">
            <div class="image-caption">Distance Transform for Memorial Stadium Center</div>
        </div>
        <div>
            <img src="media/42.png" alt="Blending Mask">
            <div class="image-caption">Blending Mask</div>
        </div>
        <div>
            <img src="media/55.png" alt="Final Blended Output of Memorial Stadium Left and Center">
            <div class="image-caption">Final Blended Output of Memorial Stadium Left and Center</div>
        </div>
    </div>

    <hr class="rounded">
    <div class="image-container">
        <div>
            <img src="media/43.png" alt="Distance Transform for Memorial Stadium Right">
            <div class="image-caption">Distance Transform for Memorial Stadium Right</div>
        </div>
        <div>
            <img src="media/44.png" alt="Distance Transform for Memorial Stadium Center">
            <div class="image-caption">Distance Transform for Memorial Stadium Center</div>
        </div>
        <div>
            <img src="media/45.png" alt="Blending Mask">
            <div class="image-caption">Blending Mask</div>
        </div>
        <div>
            <img src="media/46.png" alt="Final Blended Output of Memorial Stadium Right and Center">
            <div class="image-caption">Final Blended Output of Memorial Stadium Right and Center</div>
        </div>
    </div>

    <hr class="rounded">
    <div class="image-container">
        <div>
            <img src="media/47.png" alt="Distance Transform for Chou Hall Left">
            <div class="image-caption">Distance Transform for Chou Hall Left</div>
        </div>
        <div>
            <img src="media/48.png" alt="Distance Transform for Chou Hall Center">
            <div class="image-caption">Distance Transform for Chou Hall Center</div>
        </div>
        <div>
            <img src="media/49.png" alt="Blending Mask">
            <div class="image-caption">Blending Mask</div>
        </div>
        <div>
            <img src="media/50.png" alt="Final Blended Output of Chou Hall Left and Center">
            <div class="image-caption">Final Blended Output of Chou Hall Left and Center</div>
        </div>
    </div>

    <hr class="rounded">
    <div class="image-container">
        <div>
            <img src="media/51.png" alt="Distance Transform for Chou Hall Right">
            <div class="image-caption">Distance Transform for Chou Hall Right</div>
        </div>
        <div>
            <img src="media/52.png" alt="Distance Transform for Chou Hall Center">
            <div class="image-caption">Distance Transform for Chou Hall Center</div>
        </div>
        <div>
            <img src="media/53.png" alt="Blending Mask">
            <div class="image-caption">Blending Mask</div>
        </div>
        <div>
            <img src="media/54.png" alt="Final Blended Output of Chou Hall Right and Center">
            <div class="image-caption">Final Blended Output of Chou Hall Right and Center</div>
        </div>
    </div>
    
</body>
</html>
